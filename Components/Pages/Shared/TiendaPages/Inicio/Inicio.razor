@page "/"
@using System.Timers

<PageTitle>Inicio - Golazo Store</PageTitle>

<section class="relative w-full h-screen overflow-hidden flex items-center justify-center">
    <div class="relative w-full h-full">
        @for (int i = 0; i < bannerImages.Count; i++)
        {
            var index = i;
            <div class="absolute inset-0 transition-opacity duration-700 ease-in-out @(currentBannerIndex == index ? "opacity-100" : "opacity-0")">
                <img src="@bannerImages[index].ImageUrl"
                     alt="@bannerImages[index].AltText"
                     class="w-full h-full object-cover">

                <div class="absolute inset-0 bg-gradient-to-r from-black/70 via-black/30 to-transparent flex items-center">
                    <div class="container mx-auto px-4">
                        <div class="max-w-lg text-white">
                            <h2 class="text-3xl md:text-5xl font-bold mb-4 animate-fade-in">@bannerImages[index].Title</h2>
                            <p class="text-lg md:text-xl mb-6 animate-fade-in-delayed">@bannerImages[index].Description</p>
                            @if (!string.IsNullOrEmpty(bannerImages[index].ButtonText) && !string.IsNullOrEmpty(bannerImages[index].ButtonUrl))
                            {
                                <a href="@bannerImages[index].ButtonUrl"
                                   class="inline-block bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105 animate-fade-in-delayed-2">
                                    @bannerImages[index].ButtonText
                                </a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>

    <button @onclick="PreviousBanner"
            class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/75 text-white p-3 rounded-full transition-all duration-300 hover:scale-110">
        <i class="fas fa-chevron-left text-xl"></i>
    </button>

    <button @onclick="NextBanner"
            class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/75 text-white p-3 rounded-full transition-all duration-300 hover:scale-110">
        <i class="fas fa-chevron-right text-xl"></i>
    </button>

    <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-3">
        @for (int i = 0; i < bannerImages.Count; i++)
        {
            var index = i;
            <button @onclick="() => GoToBanner(index)"
                    class="w-4 h-4 rounded-full transition-all duration-300 transform hover:scale-110 @(currentBannerIndex == index ? "bg-yellow-500 shadow-lg" : "bg-white/50 hover:bg-white/75")">
            </button>
        }
    </div>

    <button @onclick="ToggleBannerAutoPlay"
            class="absolute top-4 right-4 bg-black/50 hover:bg-black/75 text-white p-2 rounded-full transition-all duration-300 hover:scale-110">
        <i class="fas @(isBannerAutoPlaying ? "fa-pause" : "fa-play")"></i>
    </button>
</section>

<section class="py-16 bg-gray-100">
    <div class="container mx-auto px-4">
        <h2 class="section-title">CATEGORÍAS DESTACADAS</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            <a href="/camisetas" class="category-card text-center p-6">
                <img src="imagenes/camisetas/camiseta1.webp" alt="Camisetas" class="w-full h-40 object-contain mx-auto mb-4">
                <h3 class="font-semibold text-lg text-gray-800">CAMISETAS</h3>
                <p class="text-gray-600 mt-2">Últimos modelos</p>
            </a>

            <a href="/guantes" class="category-card text-center p-6">
                <img src="imagenes/guantes/guantes1.webp" alt="Guantes" class="w-full h-40 object-contain mx-auto mb-4">
                <h3 class="font-semibold text-lg text-gray-800">GUANTES</h3>
                <p class="text-gray-600 mt-2">Para porteros</p>
            </a>

            <a href="/accesorios" class="category-card text-center p-6">
                <img src="imagenes/accesorios/accesorio1.jpg" alt="Accesorios" class="w-full h-40 object-contain mx-auto mb-4">
                <h3 class="font-semibold text-lg text-gray-800">ACCESORIOS</h3>
                <p class="text-gray-600 mt-2">Complementos</p>
            </a>

            <a href="/botines" class="category-card text-center p-6">
                <img src="imagenes/Botines/botines1.webp" alt="Botines" class="w-full h-40 object-contain mx-auto mb-4">
                <h3 class="font-semibold text-lg text-gray-800">BOTINES</h3>
                <p class="text-gray-600 mt-2">Para todas las superficies</p>
            </a>
        </div>
    </div>
</section>

<section class="py-16 bg-white">
    <div class="container mx-auto px-4">
        <h2 class="section-title">PRODUCTOS DESTACADOS</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            <div class="product-card">
                <div class="relative">
                    <img src="imagenes/camisetas/camiseta5.webp" alt="Camiseta" class="product-image">
                </div>
                <div class="p-4">
                    <div class="text-xs text-gray-500 mb-1">Equipo Famoso</div>
                    <h3 class="font-semibold text-gray-800 mb-2">Camiseta Visitante 24/25</h3>
                    <div class="flex items-center mb-2 rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                        <span class="text-gray-500 text-xs ml-1">(18)</span>
                    </div>
                    <div class="price">RD$ 2,299</div>
                </div>
            </div>

            <div class="product-card">
                <div class="relative">
                    <img src="imagenes/guantes/guantes3.jpg" alt="Guantes" class="product-image">
                </div>
                <div class="p-4">
                    <div class="text-xs text-gray-500 mb-1">Marca Especialista</div>
                    <h3 class="font-semibold text-gray-800 mb-2">Guantes Ultra Grip</h3>
                    <div class="flex items-center mb-2 rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                        <span class="text-gray-500 text-xs ml-1">(9)</span>
                    </div>
                    <div class="price">RD$ 5,199</div>
                </div>
            </div>

            <div class="product-card">
                <div class="relative">
                    <img src="imagenes/accesorios/accesorio5.jpg" alt="Accesorio" class="product-image">
                </div>
                <div class="p-4">
                    <div class="text-xs text-gray-500 mb-1">Marca Deportiva</div>
                    <h3 class="font-semibold text-gray-800 mb-2">Rodilleras Elite Pro</h3>
                    <div class="flex items-center mb-2 rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <span class="text-gray-500 text-xs ml-1">(25)</span>
                    </div>
                    <div class="price">RD$ 1,499</div>
                </div>
            </div>

            <div class="product-card">
                <div class="relative">
                    <img src="imagenes/Botines/botines4.webp" alt="Botines" class="product-image">
                </div>
                <div class="p-4">
                    <div class="text-xs text-gray-500 mb-1">Marca Deportiva</div>
                    <h3 class="font-semibold text-gray-800 mb-2">Botines Control Plus</h3>
                    <div class="flex items-center mb-2 rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                        <span class="text-gray-500 text-xs ml-1">(11)</span>
                    </div>
                    <div class="price">RD$ 6,999</div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-16 bg-gray-100">
    <div class="container mx-auto px-4">
        <h2 class="section-title">NUESTRAS MARCAS</h2>
        <div class="flex flex-wrap justify-center items-center gap-8 md:gap-16">
            <img src="imagenes/marcas/Nike.png" alt="Nike" class="brand-logo">
            <img src="imagenes/marcas/Adidas.png" alt="Adidas" class="brand-logo">
            <img src="imagenes/marcas/Puma.png" alt="Puma" class="brand-logo">
            <img src="imagenes/marcas/Under Armour.png" alt="Under Armour" class="brand-logo">
            <img src="imagenes/marcas/wilson.png" alt="Wilson" class="brand-logo">
        </div>
    </div>
</section>

<section class="py-16 newsletter">
    <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl font-bold mb-4">SUSCRÍBETE A NUESTRO NEWSLETTER</h2>
        <p class="text-gray-300 mb-8 max-w-2xl mx-auto">Recibe las últimas novedades, ofertas exclusivas y descuentos especiales directamente en tu correo.</p>
        <div class="max-w-md mx-auto flex">
            <input type="email" placeholder="Tu correo electrónico" class="newsletter-input">
            <button class="newsletter-button">
                Suscribirse
            </button>
        </div>
    </div>
</section>

@code {
    // Variables del carrusel de banners
    private List<BannerImage> bannerImages = new();
    private int currentBannerIndex = 0;
    private Timer? bannerTimer;
    private bool isBannerAutoPlaying = true;
    private int autoPlayInterval = 5000; // 5 segundos

    public class BannerImage
    {
        public string ImageUrl { get; set; } = "";
        public string AltText { get; set; } = "";
        public string Title { get; set; } = "";
        public string Description { get; set; } = "";
        public string? ButtonText { get; set; }
        public string? ButtonUrl { get; set; }
    }

    protected override void OnInitialized()
    {
        // Configurar las imágenes de banner usando las que tienes en tu proyecto
        bannerImages = new List<BannerImage>
        {
            new BannerImage
            {
                ImageUrl = "imagenes/banners/banner2.jpg",
                AltText = "Nuevas Camisetas",
                Title = "¡Nuevas Camisetas!",
                Description = "Descubre las últimas camisetas de tus equipos favoritos",
                ButtonText = "Ver Camisetas",
                ButtonUrl = "/camisetas"
            },
            new BannerImage
            {
                ImageUrl = "imagenes/banners/banner4.jpg",
                AltText = "Botines Profesionales",
                Title = "Botines Profesionales",
                Description = "La mejor calidad para elevar tu juego al siguiente nivel",
                ButtonText = "Ver Botines",
                ButtonUrl = "/botines"
            },
            new BannerImage
            {
                ImageUrl = "imagenes/banners/banner3.jpg",
                AltText = "Guantes de Portero",
                Title = "Guantes de Portero",
                Description = "Protección y agarre excepcional para los mejores arqueros",
                ButtonText = "Ver Guantes",
                ButtonUrl = "/guantes"
            },
            new BannerImage
            {
                ImageUrl = "imagenes/banners/banner1.jpg",
                AltText = "Accesorios",
                Title = "Accesorios Deportivos",
                Description = "Completa tu equipamiento con los mejores accesorios",
                ButtonText = "Ver Accesorios",
                ButtonUrl = "/accesorios"
            },
            new BannerImage
            {
                ImageUrl = "imagenes/banners/banner5.jpg",
                AltText = "Ofertas Especiales",
                Title = "Ofertas Especiales",
                Description = "No te pierdas nuestras increíbles promociones",
                ButtonText = "Ver Ofertas",
                ButtonUrl = "/novedades"
            },

            new BannerImage
            {
                ImageUrl = "imagenes/banners/banner6.webp",
                AltText = "Ofertas Especiales",
                Title = "Ofertas Especiales",
                Description = "No te pierdas nuestras increíbles promociones",
                ButtonText = "Ver Ofertas",
                ButtonUrl = "/novedades"
            }
        };

        StartBannerAutoPlay();
    }

    // Métodos del carrusel de banners
    private void StartBannerAutoPlay()
    {
        if (isBannerAutoPlaying && bannerImages.Count > 1)
        {
            bannerTimer = new Timer(autoPlayInterval);
            bannerTimer.Elapsed += OnBannerTimerElapsed;
            bannerTimer.AutoReset = true;
            bannerTimer.Enabled = true;
        }
    }

    private async void OnBannerTimerElapsed(object? sender, ElapsedEventArgs e)
    {
        await InvokeAsync(() =>
        {
            NextBanner();
            StateHasChanged();
        });
    }

    private void NextBanner()
    {
        currentBannerIndex = (currentBannerIndex + 1) % bannerImages.Count;
    }

    private void PreviousBanner()
    {
        currentBannerIndex = currentBannerIndex == 0 ? bannerImages.Count - 1 : currentBannerIndex - 1;
    }

    private void GoToBanner(int index)
    {
        currentBannerIndex = index;
    }

    private void ToggleBannerAutoPlay()
    {
        isBannerAutoPlaying = !isBannerAutoPlaying;

        if (isBannerAutoPlaying)
        {
            StartBannerAutoPlay();
        }
        else
        {
            bannerTimer?.Stop();
            bannerTimer?.Dispose();
            bannerTimer = null;
        }
    }

    public void Dispose()
    {
        bannerTimer?.Stop();
        bannerTimer?.Dispose();
    }
}